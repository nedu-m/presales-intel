<div class="surface-panel brief-card" id="brief-{{ brief.id }}">
    <div class="panel-header">
        <div>
            <h2 style="margin: 0;">{{ brief.company_name }}</h2>
            <p style="margin: 0.35rem 0 0; color: var(--muted); font-size: 0.9rem;">Brief generated successfully</p>
        </div>
        <div class="panel-actions" style="justify-content: flex-start; gap: 0.75rem; margin-top: 0;">
            <button type="button" class="secondary-btn" onclick="window.print()">Print</button>
            <button type="button" class="secondary-btn" onclick="copyBrief({{ brief.id }})">Copy text</button>
            <a href="/briefs/{{ brief.id }}" class="secondary-btn">View full detail</a>
        </div>
    </div>

    {% set sections = [
        ("Company context", brief.company_context),
        ("Attendee analysis", brief.attendee_analysis),
        ("Tech & security", brief.tech_stack),
        ("Competitive landscape", brief.competitive_landscape),
        ("Questions & talking points", brief.suggested_questions)
    ] %}
    <div class="section-grid">
        {% for label, content in sections %}
            {% if content %}
            <article class="section-card">
                <small>{{ label }}</small>
                <p>{{ content|striptags|replace('\n', ' ')|truncate(160, False, 'â€¦') }}</p>
            </article>
            {% endif %}
        {% endfor %}
    </div>

    <div class="markdown-content">
        {{ brief.full_brief|markdown|safe }}
    </div>
</div>

<script>
function copyBrief(id) {
    const section = document.querySelector(`#brief-${id} .markdown-content`);
    if (!section) return;
    navigator.clipboard.writeText(section.innerText).then(() => {
        console.log('Brief copied to clipboard');
    });
}
</script>
